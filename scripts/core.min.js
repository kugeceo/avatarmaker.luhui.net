"use strict";(function(){var e=1,t=1,a=.05,o=15;SVG.extend(SVG.Element,{svgaCenterScale:function(e,t){var a=this.bbox(),o=a.cx;return a=a.cy,t||(t=e),this.transform({a:e,b:0,c:0,d:t,e:o-e*o,f:a-t*a})},svgaLeft:function(e,a){e=e||3,a=a||t;var o=avatarMaker.svgStore.data(this,"leftright"),r=avatarMaker.svgStore.data(this,"updown");return o>-e*a&&(this.move(o-a,r),avatarMaker.svgStore.data(this,"leftright",o-a)),this},svgaRight:function(e,a){e=e||3,a=a||t;var o=avatarMaker.svgStore.data(this,"leftright"),r=avatarMaker.svgStore.data(this,"updown");return o<e*a&&(this.move(o+a,r),avatarMaker.svgStore.data(this,"leftright",o+a)),this},svgaUp:function(t,a){t=t||3,a=a||e;var o=avatarMaker.svgStore.data(this,"leftright"),r=avatarMaker.svgStore.data(this,"updown");return r>-t*a&&(this.move(o,r-a),avatarMaker.svgStore.data(this,"updown",r-a)),this},svgaDown:function(t,a){t=t||3,a=a||e;var o=avatarMaker.svgStore.data(this,"leftright"),r=avatarMaker.svgStore.data(this,"updown");return r<t*a&&(this.move(o,r+a),avatarMaker.svgStore.data(this,"updown",r+a)),this},svgaScaleUp:function(e,t,o){e=e||3,t=t||a,o=o||t;var r=avatarMaker.svgStore.data(this,"scaleX")+1e-7,s=avatarMaker.svgStore.data(this,"scaleY")+1e-7;return r<1+e*t&&(this.svgaCenterScale(r+t,s+o),avatarMaker.svgStore.data(this,"scaleX",r+t+1e-7),avatarMaker.svgStore.data(this,"scaleY",s+o+1e-7)),this},svgaScaleDown:function(e,t,o){e=e||3,t=t||a,o=o||t;var r=avatarMaker.svgStore.data(this,"scaleX")-1e-7,s=avatarMaker.svgStore.data(this,"scaleY")-1e-7;return r>1-e*t&&(this.svgaCenterScale(r-t,s-o),avatarMaker.svgStore.data(this,"scaleX",r-t-1e-7),avatarMaker.svgStore.data(this,"scaleY",s-o-1e-7)),this},svgaRotateLeft:function(e,t,a,r){e=e||2,t=t||o;var s=avatarMaker.svgStore.data(this,"rotate");return s>-e*t&&(this.rotate(s-t-1e-7,a,r),avatarMaker.svgStore.data(this,"rotate",s-t-1e-7),avatarMaker.svgStore.data(this,"rotate-x",a),avatarMaker.svgStore.data(this,"rotate-y",r)),this},svgaRotateRight:function(e,t,a,r){e=e||2,t=t||o;var s=avatarMaker.svgStore.data(this,"rotate");return s<e*t&&(this.rotate(s+t+1e-7,a,r),avatarMaker.svgStore.data(this,"rotate",s+t+1e-7),avatarMaker.svgStore.data(this,"rotate-x",a),avatarMaker.svgStore.data(this,"rotate-y",r)),this},svgaCancelRotate:function(){return this.rotate(1e-7),avatarMaker.svgStore.data(this,"rotate",1e-7),this}})})(),function(e){var t=function(t){function a(){var e=he.options.settings;he.init=!1,he.drawFlag=!1,he.svgStore=new SvgStore,he.history=new AvatarMakerHistory({maxLength:100,parent:he,undoButtonSelector:"[data-action='undo']",redoButtonSelector:"[data-action='redo']",saveActions:["zoneUp","zoneDown","zoneLeft","zoneRight","zoneShrink","zoneExpand","zonePlus","zoneMinus","zoneBrows1","zoneBrows2","zoneBrows3","zoneBrows4","zoneBrowsCancel","globUp","globDown","globLeft","globRight","globPlus","globMinus","globRotateLeft","globRotateRight"],onUpdate:function(e){if(void 0!==e.areas[he.zone]&&void 0!==e.colors[he.zone]){for(var t in e.colors)de(e.colors[t],t);for(var t in e.areas)d(t,e.areas[t],he.currentStyle,!1);e.params&&s(deepCopy(e.params)),he.colorControl.setColor(e.colors[he.zone],he.zone),void 0!==he.currentAvatar[he.zone]&&he.elementsControl.setActiveState(he.zone,he.currentAvatar[he.zone],he.currentStyle)}}}),he.styleButtons=new StyleButtons({selector:".style-buttons",itemSelector:".style-buttons__item",activeClass:"style-buttons__item_active",onClick:function(e,t){he.setStyle(t)}});var t={selector:"svga-svgmain",saveScriptUrl:e.pathToPhpFolder+"save-temp-avatar.php",downloadScriptUrl:e.pathToPhpFolder+"download-temp-avatar.php",downloadingName:e.downloadingName,icon:document.getElementById("downloadButtonIcon"),iconLoader:document.getElementById("downloadButtonIconLoader"),rootButton:document.getElementById("downloadButton"),showLoaderTime:300,abortTime:1e4,classNames:{iconHidden:"button__icon_hidden",buttonLoader:"button_disabled",buttonPen:"button_pen"}},a=deepCopy(t);t.parent=he,t.errorCallback=function(e){},a.parent=he,a.icon=document.getElementById("shareButtonIcon"),a.iconLoader=document.getElementById("shareButtonIconLoader"),a.rootButton=document.getElementById("shareButton"),he.saver=new AvatarMakerSaver(t),he.modal=new Modal({root:document.querySelector(".modal"),classNames:{rootVisible:"modal_visible",sectionVisible:"modal-content_visible",pinLabel:"modal-input_pin"}}),he.share=new AvatarShare({root:document.getElementById("shareContent"),buttonSelector:"[data-share]",saverOptions:a,parent:he}),he.baron=new BaronHelper({structure:'<div class="baron baron__root"><div class="baron__scroller"></div><div class="baron__track"><div class="baron__bar"></div></div></div>',settings:{barOnCls:"baron_scrollbar-vertical",scrollingCls:"baron_scrolling",draggingCls:"baron_dragging",direction:"v",cssGuru:!0,selector:".avatar-elements__inner",additionalClass:"avatar-elements__inner_baron"}}),he.elementsControl=new ElementsControl({root:document.querySelector(".avatar-elements__content"),classNames:{element:"avatar-elements__item",elementSelected:"avatar-elements__item_selected",elementHidden:"avatar-elements__item_hidden",elementLoading:"avatar-elements__item_loading",elementAppendSvg:"avatar-elements__item_append-svg"},onSelect:function(e){he.setArea(e.dataset.group,e.dataset.index,e.dataset.style)}}),he.colorControl=new ColorControl({root:document.querySelector("#palette"),toggleButtonSelector:".button_color",classNames:{button:"palette__button",hidden:"palette_hidden",canvas:"palette__canvas",toggleButtonActive:"button_active"},thumbClassNames:{thumb:"palette__thumb",active:"palette__thumb_active"},onUpdate:function(e){he.init&&he.setColor(e)},onClose:function(e,t){T(),e!=t&&he.init&&he.history.save()}}),he.buttonsControl=new ButtonsControl({root:document.querySelector(".content__categories-buttons"),elemInitCls:"buttons-group_init",elemHiddenCls:"buttons-group_hidden",elemNoTransition:"buttons-group_no-transition",marginRight:parseFloat(4.8.toFixed(2))}),he.actions=A(),he.setZone=u,he.setArea=d,he.setColor=de,he.setStyle=i,he.currentStyle=null,he.currentColors={},he.currentAvatar={},he.categoriesControlSettings={root:null,groupSelector:".avatar-cat__item",buttonSelector:".category-controls__item",scaleFactor:1.4,classNames:{buttonInit:"cat-button_init",buttonNoTransition:"cat-button_no-trs",buttonHidden:"cat-button_hidden",buttonActive:"cat-button_active",buttonOpen:"cat-button_color-red",groupEventsNone:"category-controls_events-none"},onUpdate:function(){}},he.baron.add({name:"areas"}),he.browser=m(),he.browser.iOS&&document.querySelector("html").classList.add("is-ios"),p(),r(fe)}function o(t){var a=0,o=document.querySelector(".content__cat-control"),r=document.querySelector(".cat-select"),s=!r.classList.contains("cat-select_hidden");s&&!t&&(t=r),t==r?(Array.prototype.forEach.call(t.children,function(e){a+=e.offsetHeight}),o.classList.add("content__cat-control_cat-select")):(a=t?t.offsetHeight:0,o.classList.remove("content__cat-control_cat-select")),a?(o.style.minHeight=a+"px",e.MSInputMethodContext&&document.documentMode&&(o.style.height=a+"px")):(o.style.removeProperty("min-height"),o.style.removeProperty("height"))}function r(e){function t(){n.appendChild(s),he.baron.setDirection("areas",o?"v":"h"),c.appendChild(l)}function a(){i.appendChild(s),he.baron.setDirection("areas","v"),document.querySelector(".content__cat-select").classList.contains("cat-select_hidden")||document.querySelector(".content__categories-buttons").classList.add("content__categories-buttons_hidden"),g.appendChild(l)}var o=ye.matches,r=fe.matches,s=document.querySelector(".content__avatar-buttons"),n=document.querySelector(".mobile-control__avatar-slot"),i=document.querySelector("#desktopAvatarButtons"),l=document.querySelector("#styleButtons"),c=document.querySelector("#styleButtonsMobile"),g=document.querySelector("#styleButtonsDesktop");r?t():a(),U(),he.colorControl.close(),h()}function s(e){function t(e,t){var a=SVG.get(e),o=he.options.settings.atlasPosition[he.currentStyle||0];"svga-group-eyebrows-left-rotate"!=e&&"svga-group-eyebrows-right-rotate"!=e||a.attr("transform","matrix(1,0,0,1,0,0)"),void 0!==t.updown&&a.move(t.leftright,t.updown),void 0!==t.scaleX&&a.svgaCenterScale(t.scaleX,t.scaleY),void 0!==t.rotate&&a.rotate(t.rotate),"svga-group-hair-back-move"!=e&&"svga-group-head"!=e||(a.attr("transform","matrix(1,0,0,1,0,0)"),a.rotate(t.rotate,o.x,o.y))}for(var a in he.svgStore.store=deepCopy(e),e)t(a,e[a])}function n(){var e,t,a,r,s,n,i;n=he.data.defaults.zones,he.setStyle(0),he.setZone("faceshape"),se(),ge();for(var l=0;l<n.length;l++){for(var c in s=n[l],e="backs"==s||"hair"==s?1:0,i=he.data.elementsInfo[s],t=i?"backs"==s?i.shapes[e]:i.shapes[he.currentStyle][e]:[],t)if(t.hasOwnProperty(c))for(var g=-1,u=he.quantity.styles;g<u;g++)a="svga-group-"+s+"-"+c+(-1==g?"":"-"+g),document.getElementById(a).innerHTML="",r=SVG.get(a),r&&(he.drawFlag=!0,ie(r,s,e,c));he.currentAvatar[s]=e}C(),L(),o(),se(),document.querySelector(".page__inner").classList.add("page__inner_ready"),h()}function i(e){he.currentStyle=e,he.styleButtons.setActive(he.currentStyle),he.elementsControl.showGroup(he.zone,"backs"==he.zone?0:he.currentStyle),he.elementsControl.setActiveState(he.zone,he.currentAvatar[he.zone],he.currentStyle,!0),oe();for(var t=0,a=Object.keys(he.currentAvatar),o=a.length;t<o;t++)he.setArea(a[t],he.currentAvatar[a[t]],he.currentStyle);re(),w(null,he.zone||"faceshape",!0)}function l(e){var t="."+he.elementsControl.options.classNames.element+"[data-group='"+e+"'][data-style='0']",a=he.elementsControl.root.querySelectorAll(t);return he.quantity[e]-(a.length||0)}function c(e,t,a){function o(t){function o(e,t){let a=[];for(var o=0,r=e.length;o<r;o++)a.push(e[o]);for(o=0,r=t.length;o<r;o++)a.push(t[o]);return a}var s,n=JSON.parse(t.response),i=n.started_excluded,l=null,c=null,g=he.drawFlag,u=null;S(n),n=n.elementsInfo,he.drawFlag=!1;for(var d=0,v=Object.keys(n),m=v.length;d<m;d++){if(l=n[v[d]].scaleFactor,i)if(u=n[v[d]].shapes,Array.isArray(u[0]))for(var p=0,h=u.length;p<h;p++)he.data.elementsInfo[v[d]].shapes[p]=o(he.data.elementsInfo[v[d]].shapes[p],u[p]);else he.data.elementsInfo[v[d]].shapes=o(he.data.elementsInfo[v[d]].shapes,u);else he.data.elementsInfo[v[d]]=n[v[d]];r(v[d],he.data.elementsInfo[v[d]].shapes,l)}requestAnimationFrame(function(){c="."+he.elementsControl.options.classNames.element+"[data-group='"+e+"']",s=document.querySelectorAll(c);for(var t=0,a=s.length;t<a;t++)s[t].classList.remove(he.elementsControl.options.classNames.elementLoading)}),he.drawFlag=g,a&&a()}function r(e,t,a){for(var o,r=null,n=he.elementsControl.root,i=s+1,l=null,c=0,g="backs"==e?1:he.quantity.styles;c<g;c++){r="backs"==e?t:t[c];for(var u=i,d=r.length+i;u<d;u++)l="."+he.elementsControl.options.classNames.element+"[data-group='"+e+"'][data-index='"+u+"'][data-style='"+c+"']",o=n.querySelector(l),o&&(o.classList.contains(he.elementsControl.options.classNames.elementHidden)&&o.classList.add(he.elementsControl.options.classNames.elementAppendSvg),ce(o,e,u,c,r[u],a),o.classList.remove(he.elementsControl.options.classNames.elementAppendSvg))}}var s=parseInt(he.elementsControl.getLastIndex(e)),n=he.gender+"_",i={eyesfront:"eyes",eyesiris:"iris",faceshape:"face",eyebrows:"brows",backs:"back"},l="";n+=i[e]||e,l="data/"+n+".json?a2";for(var c=0,g="backs"==e?1:he.quantity.styles;c<g;c++)for(var u=0;u<t;u++)he.elementsControl.appendElement(null,{group:e,index:s+u+1,style:c},["loading",c!=he.currentStyle&&"backs"!=e||e!=he.zone?"hidden":""]);ajax({method:"GET",path:l,type:"application/json",onDone:o,onError:function(o){console.error(o||"An error occurred while loading data");for(var r=0,n="backs"==e?1:he.quantity.styles;r<n;r++)for(var i=0;i<t;i++)he.elementsControl.removeElement(e,r,s+i+1);a&&a()}})}function g(e,t){var a=l(e);0!=a?c(e,a,function(){t&&t(e)}):t&&t(e)}function u(e){var t,a,r;if(he.zone=e,he.elementsControl.showGroup(he.zone,"backs"==he.zone?0:he.currentStyle),he.init&&g(he.zone),r=he.data.elementsInfo[he.zone],document.querySelector("[data-action='openMoveSection']"),void 0!==he.currentAvatar[he.zone]&&he.elementsControl.setActiveState(he.zone,he.currentAvatar[he.zone],"backs"==he.zone?0:he.currentStyle,!0),he.baron.update(),he.baron.toTop("areas"),he.categoriesControl.update(),a=document.querySelector(".mobile-category__cat[data-zone-name='"+he.zone+"']"),a){for(var s=0,n=document.querySelectorAll(".mobile-category__cat"),i=n.length;s<i;s++)n[s].classList.remove("cat-button_active");a.classList.add("cat-button_active")}!r.controls.length||1==r.controls.length&&"color"==r.controls[0]?document.getElementById("zoneControlTitle").classList.add("mobile-control__title_hidden"):document.getElementById("zoneControlTitle").classList.remove("mobile-control__title_hidden"),he.zone&&(document.getElementById("zoneControlTitleZone").innerText=he.options.settings.labels[he.zone]||he.zone);let l=document.querySelector("#mobColorButton"),c=document.querySelector("#mobStylesButton");if(l&&c){let e=3==he.currentStyle&&"backs"!=he.zone&&he.data.excludePaletteFrom4StyleExceptBacks;l.classList[e?"add":"remove"]("buttons-group_dissolved"),c.classList[e?"add":"remove"]("buttons-group_translate-right")}o(),t=r.colors,"string"==typeof t&&(t=he.data.defaults.examples[t]),he.colorControl.setPalette(t),void 0!==he.currentAvatar[he.zone]&&he.colorControl.setColor(he.currentColors[he.zone],!1)}function d(e,t,a,o){function r(e,t){var a={female:{nose:2,mouth:3},male:{nose:1,mouth:2}},o=a[he.gender][t];if(e&&e.node&&e.node.childNodes)for(var r=e.node.childNodes,s=0,n=r.length;s<n;s++)r[s].setAttribute("transform","translate(0 "+o+")")}var s,n,i;e="eyesfront"==e?["eyesback","eyesfront"]:"faceshape"==e?["faceshape","chinshadow"]:e.split();for(var l=0,c=e.length;l<c;l++){s="facehighlight"==e[l]||"humanbody"==e[l]?0:t;for(var g=-1;g<he.quantity.styles;g++)for(var u in n="backs"==e?he.data.elementsInfo[e[l]].shapes[s]:he.data.elementsInfo[e[l]].shapes[-1==g?he.currentStyle:g][s],n)n.hasOwnProperty(u)&&(i=SVG.get("svga-group-"+e[l]+"-"+u+(-1==g?"":"-"+g)),v(i),ie(i,e[l],s,u,-1==g?null:g));he.currentAvatar[e[l]]=s}!1!==o&&he.init&&he.history.save(),he.elementsControl.setActiveState(he.zone,he.currentAvatar[he.zone],"backs"==he.zone?0:he.currentStyle,!0),-1!=["nose","mouth"].indexOf(e[0])&&he.currentStyle<2&&(r(SVG.get("svga-group-mouth-single"),"mouth"),r(SVG.get("svga-group-mouth-single-0"),"mouth"),r(SVG.get("svga-group-mouth-single-1"),"mouth"),r(SVG.get("svga-group-nose-single"),"nose"),r(SVG.get("svga-group-nose-single-0"),"nose"),r(SVG.get("svga-group-nose-single-1"),"nose"))}function v(e){if(e)for(var t=0,a=e.node.childNodes,o=a.length;t<o;t++)e.node.removeChild(a[0])}function m(){var e=navigator.userAgent;return{iOS:!!e.match(/(iPad|iPhone|iPod)/g),android:!!e.match(/(Android)/g),opera:!!e.match(/(Opera)/g),win8tablet:-1!==navigator.platform.toLowerCase().indexOf("win")&&-1!==e.toLowerCase().indexOf("touch")}}function p(){function t(){he.baron.update(),he.categoriesControl&&he.categoriesControl.recalculate(),he.buttonsControl&&he.buttonsControl.update(),h()}function a(e){var t=e.target.closest(".mobile-category__cat");t&&w(null,t,!0)}function o(e){var t,a,o,r;t=e.target.closest("[data-action]"),a=e.target.closest("[data-mobile-action]"),(t||fe.matches)&&(fe.matches&&(o=a?a.dataset.mobileAction:null),o||(o=t?t.dataset.action:null),o&&(r="BUTTON"==(a||t).tagName.toUpperCase(),r&&(z(o),-1!=he.history.options.saveActions.indexOf(o)&&he.init&&he.history.save())))}function s(e){function t(){this.removeEventListener("transitionend",t),he.categoriesControl.selectedElement.focus(),he.buttonsControl.setTransition(!0)}var a=e.target.closest(".cat-select__button"),o=document.querySelector(".content__categories-buttons"),r=document.querySelector(".content__category"),s={catSelectHidden:"cat-select_hidden",buttonsHidden:"content__categories-buttons_hidden",categoryHidden:"content__category_hidden"};a&&(e.preventDefault(),this.addEventListener("transitionend",t),this.classList.add(s.catSelectHidden),o.classList.remove(s.buttonsHidden),r.classList.remove(s.categoryHidden),he.categoriesControl.selectElement(a.dataset.catIndex,0,!1))}function n(e){var t,a,o={share:{elemId:"shareButton",content:c},download:{elemId:"downloadButton",content:g}};if(t=e.target.closest("#"+o.share.elemId+", #"+o.download.elemId),!t)return o.share.content.classList.remove(u),void o.download.content.classList.remove(u);for(var r in o)a=o[r],a.elemId!=t.id||a.content.classList.contains(u)?l(a.content):i(a.content)}function i(e){var t=e.querySelectorAll(".button");e.classList.add(u);for(var a=0,o=t.length;a<o;a++)t[a].removeAttribute("tabindex")}function l(e){var t=e.querySelectorAll(".button");e.classList.remove(u);for(var a=0,o=t.length;a<o;a++)t[a].setAttribute("tabindex",-1)}var c=document.getElementById("shareContent"),g=document.getElementById("downloadContent"),u="footer__popup_active";he.options.root.querySelector(".start").addEventListener("click",y),he.options.root.addEventListener("click",o),document.querySelector(".cat-select").addEventListener("click",s),document.addEventListener("click",function(e){a(e),n(e)}),fe.addListener(r),ye.addListener(r),e.addEventListener("resize",t),e.addEventListener("load",r)}function h(){var e=document.querySelector(".page__inner");e.classList.contains("page__inner_ready")?e.style.height="":e.style.height=document.querySelector(".start__container").offsetHeight+"px"}function f(){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=he.options.settings.endCSSPath,e.addEventListener("load",function(){he.options.cssIsReady=!0}),document.head.appendChild(e)}function y(e,t){if(e){var a,o=e.target.closest(".start-image");if(!o||!o.dataset)return;t=t||o.dataset.gender,a=t+"_start"}if(f(),this.querySelector(".start-arrows__content").classList.add("start-arrows__content_hidden"),this.querySelector(".start-loading").classList.add("start-loading_visible"),o&&o.classList.add("start-image_active"),!o&&t)return b("male"==t?maleData:femaleData,t),void q();document.body.classList.add("page_disabled"),x(a,function(e,a){b(e,t,a)})}function b(e,t,a,o){if(o){var r;for(var s in S(e),he.gender=t,he.data=e,he.quantity=he.data.quantity,r=he.data.defaults.colors,document.documentElement.style.setProperty("--accent-color",he.data.defaults.color),r)r.hasOwnProperty(s)&&(he.currentColors[s]=r[s]);he.categoriesControlSettings.root=document.querySelector(".content__categories"),he.categoriesControlSettings.onUpdate=w,he.categoriesControlSettings.acceptableNames=he.data.defaults.zones,he.categoriesControl=he.categoriesControl||new CategoriesControl(he.categoriesControlSettings),n(),he.init=!0,he.init&&he.history.save(),a.hurryUp()}else setTimeout(b.bind(null,e,t,a,he.options.cssIsReady),100)}function S(e){for(var t=e.elementsInfo,a=Object.keys(t),o=0,r=a.length;o<r;o++)for(var s=0,n=t[a[o]].shapes,i=n.length;s<i;s++)if(Array.isArray(n[s]))for(var l=0,c=n[s].length;l<c;l++)_(n[s][l]);else _(n[s])}function _(e){for(var t={opacity:1,stroke:"none",strokeWidth:"none",fromskin:!1,hideonthumbs:!1,hideoncanvas:!1},a=Object.keys(t),o=Object.keys(e),r=null,s=0,n=o.length;s<n;s++){r=e[o[s]];for(var i=0,l=r.length;i<l;i++)for(var c=0,g=a.length;c<g;c++)r[i].hasOwnProperty(a[c])||(r[i][a[c]]=t[a[c]]),r[i].hasOwnProperty("colored")||("#"==r[i].fill[0]||"gradient"==r[i].fill?r[i].colored=!1:r[i].colored=!0)}}function w(e,t,a){let o="string"==typeof t?t:t.dataset.zoneName;!a&&k(e,t),he.setZone(o);var r=he.data.elementsInfo[o].controls;-1==r.indexOf("color")&&r.push("color"),3==he.currentStyle&&"backs"!=o&&he.data.excludePaletteFrom4StyleExceptBacks&&(r=r.filter(function(e){return"color"!=e})),he.buttonsControl.setGroup(r);for(var s=document.querySelectorAll(".mobile-control [data-name]"),n=0,i=s.length;n<i;n++)-1!=r.indexOf(s[n].dataset.name)?s[n].style.display="":s[n].style.display="none"}function k(e,t){var a=e.children,o=document.querySelector(".mobile-category"),r=o.querySelector(".mobile-category__slot"),s=null;r.innerHTML="",o.classList.remove("mobile-category_hidden");for(var n=0,i=a.length;n<i;n++)s=a[n].cloneNode(!0),s.setAttribute("class","cat-button cat-button_mini cat-button_color-red mobile-category__cat"),s.removeAttribute("style"),r.appendChild(s);document.querySelector("#footerPalleteMove").classList.remove("buttons_hidden"),document.querySelector("#footerServerActions").classList.add("buttons_hidden")}function C(){var e=document.querySelectorAll(".content__categories-buttons .buttons-group"),t=document.querySelector(".mobile-control__slot"),a=null;t.innerHTML="<div class='buttons buttons_mobile-control'></div>",t=t.firstElementChild;for(var o=0,r=e.length;o<r;o++)"color"!=e[o].dataset.name&&(a=e[o].cloneNode(!0),a.setAttribute("class","buttons-group buttons-group_horizontal buttons__element"),a.removeAttribute("style"),t.appendChild(a))}function L(){var e=document.querySelector(".mobile-menu__download-slot"),t=document.querySelector(".mobile-menu__share-slot"),a=document.querySelector("#downloadContent").firstElementChild,o=document.querySelector("#shareContent").firstElementChild,r=null;r=a.cloneNode(!0),r.classList.add("mobile-menu__download-buttons"),e.appendChild(r),r=o.cloneNode(!0),r.classList.add("mobile-menu__share-buttons"),t.appendChild(r)}function x(e,t){var a=new LoaderCounter({elem:document.querySelector(".start-loading__percent"),min:0,max:100,step:1,time:50,pattern:"{d}%",autorun:!0,onStop:q}),o="data/"+e+".json?a2";ajax({method:"GET",path:o,type:"application/json",onDone:function(e){t&&t(JSON.parse(e.response),a)},onProgress:function(e){a.to(parseInt(e.loaded/e.total*100))},onError:function(e){console.error(e||"An error occurred while loading data")}})}function q(){function e(e){e.target==t&&"opacity"==e.propertyName&&(t&&t.parentNode&&t.parentNode.removeChild(t),setFocusToElement(document.querySelector(".cat-select__button"))),document.body.classList.remove("page_disabled"),document.body.classList.remove("page_oh")}for(var t=document.querySelector(".start"),a=document.querySelectorAll(".hidden-beforestart"),o=0,r=a.length;o<r;o++)a[o].classList.remove("hidden-beforestart");t&&(document.body.classList.remove("page_white"),t.addEventListener("transitionend",e),t.classList.add("start_hidden"))}function z(e){var t=e?he.actions[e]:null;e&&t&&t()}function A(){return{zoneUp:W,zoneDown:Z,zoneLeft:Y,zoneRight:X,zoneShrink:J,zoneExpand:K,zonePlus:j,zoneMinus:H,zoneBrows1:Q.bind(this,1),zoneBrows2:Q.bind(this,2),zoneBrows3:Q.bind(this,3),zoneBrows4:Q.bind(this,4),zoneBrowsCancel:Q.bind(this),globUp:$.bind(this,"up"),globDown:$.bind(this,"down"),globLeft:$.bind(this,"left"),globRight:$.bind(this,"right"),globPlus:$.bind(this,"plus"),globMinus:$.bind(this,"minus"),globRotateLeft:$.bind(this,"rotateLeft"),globRotateRight:$.bind(this,"rotateRight"),reset:se,random:te,savePngFirst:he.saver.save.bind(this,"png",he.options.settings.pngFirstSize),savePngSecond:he.saver.save.bind(this,"png",he.options.settings.pngSecondSize),saveSvg:he.saver.save.bind(this,"svg",he.options.settings.svgDownloadSize),undo:he.history.undo,redo:he.history.redo,backToCategories:V,backToZones:P,zoneColor:G,openMoveSection:D,openStylesSection:E,closeMenu:B,openMenu:M,downloadClick:R}}function R(){var t="",a=0,o=1,r=null,s="";if(he.browser.iOS){if("undefined"==typeof canvg)return void setTimeout(R,100);s=fe.matches?".mobile-menu__image":".modal__ios-image",r=document.querySelector(s),o=e.devicePixelRatio,a=r.offsetWidth*o,t=he.saver.getBase64(a),fe.matches?(document.querySelector(".mobile-menu__image-inner").src=t,M()):(document.querySelector(".modal__ios-image .modal__image").src=t,he.modal.show("ios","[data-action='downloadClick']"))}else fe.matches&&M()}function M(){var e=document.querySelector(".mobile-menu");e.classList.remove("mobile-menu_hidden")}function B(){var e=document.querySelector(".mobile-menu");e.classList.add("mobile-menu_hidden")}function D(){document.querySelector(".mobile-control_hidden")?(I(),o(document.querySelector(".mobile-control"))):P()}function I(){document.querySelector(".mobile-category").classList.add("mobile-category_hidden"),document.querySelector(".avatar-elements__inner").classList.add("avatar-elements__inner_hidden"),document.querySelector(".mobile-control").classList.remove("mobile-control_hidden")}function U(){document.querySelector(".mobile-category").classList.remove("mobile-category_hidden"),document.querySelector(".avatar-elements__inner").classList.remove("avatar-elements__inner_hidden"),document.querySelector(".mobile-control").classList.add("mobile-control_hidden")}function E(){document.querySelector(".mobile-styles_hidden")?(N(),o(document.querySelector(".mobile-styles"))):P()}function N(){document.querySelector(".mobile-category").classList.add("mobile-category_hidden"),document.querySelector(".avatar-elements__inner").classList.add("avatar-elements__inner_hidden"),document.querySelector(".mobile-control").classList.add("mobile-control_hidden"),document.querySelector(".mobile-styles").classList.remove("mobile-styles_hidden")}function O(){document.querySelector(".mobile-category").classList.remove("mobile-category_hidden"),document.querySelector(".avatar-elements__inner").classList.remove("avatar-elements__inner_hidden"),document.querySelector(".mobile-styles").classList.add("mobile-styles_hidden")}function G(){fe.matches&&(document.querySelector(".mobile-category").classList.add("mobile-category_hidden"),document.querySelector(".avatar-elements__inner").classList.add("avatar-elements__inner_hidden"),document.querySelector(".mobile-control").classList.add("mobile-control_hidden"),document.querySelector(".mobile-styles").classList.add("mobile-styles_hidden"),!he.colorControl.isOpen()&&o(document.querySelector(".palette")))}function P(e){U(),O(),e?requestAnimationFrame(function(){o()}):(he.colorControl.close(),o())}function T(){fe.matches&&P(!0)}function V(){var e=document.querySelector(".content__category"),t=document.querySelector(".cat-select");e.classList.add("content__category_hidden"),t.classList.remove("cat-select_hidden"),document.querySelector("#footerPalleteMove").classList.add("buttons_hidden"),document.querySelector("#footerServerActions").classList.remove("buttons_hidden"),o()}function F(e){for(var t=[e],a=["rotate","svgaCenterScale","svgaScaleDown","svgaScaleUp","svgaRight","svgaLeft","svgaDown","svgaUp","svgaRotateRight","svgaCancelRotate","svgaRotateLeft"],o={},r=0;r<he.quantity.styles;r++)t.push(e+"-"+r);r=0;for(var s=a.length;r<s;r++)o[a[r]]=function(e){for(var a=null,o=0,r=t.length;o<r;o++){if(a=SVG.get(t[o]),!a)return;a[e].apply(a,Array.prototype.slice.call(arguments,1))}}.bind(he,a[r]);return o}function H(e){switch(e||he.zone){case"faceshape":F("svga-group-faceshape-wrap").svgaScaleDown(2,.02,1e-4),F("svga-group-hair-back").svgaScaleDown(2,.02,1e-4),F("svga-group-hair-front").svgaScaleDown(2,.02,1e-4),"male"==he.gender&&F("svga-group-beardwrap").svgaScaleDown(2,.02,1e-4),F("svga-group-ears-left-move").svgaRight(2,1.5),F("svga-group-ears-right-move").svgaLeft(2,1.5);break;case"mouth":F("svga-group-mouth-single").svgaScaleDown(7);break;case"nose":F("svga-group-nose-single").svgaScaleDown(5);break;case"ears":F("svga-group-ears-left").svgaScaleDown(1),F("svga-group-ears-right").svgaScaleDown(1);break;case"eyebrows":F("svga-group-eyebrows-left").svgaScaleDown(2),F("svga-group-eyebrows-right").svgaScaleDown(2);break;case"eyesfront":F("svga-group-eyes-left").svgaScaleDown(2),F("svga-group-eyes-right").svgaScaleDown(2);break;case"eyesiris":F("svga-group-eyesiris-left").svgaScaleDown(4),F("svga-group-eyesiris-right").svgaScaleDown(4);break;case"mustache":Number(he.currentAvatar.mustache)&&F("svga-group-mustache-single").svgaScaleDown(4);break;case"beard":Number(he.currentAvatar.beard)&&F("svga-group-beard-single").svgaScaleDown(3);break;case"glasses":Number(he.currentAvatar.glasses)&&F("svga-group-glasses-single").svgaScaleDown(3)}}function j(e){switch(e||he.zone){case"faceshape":F("svga-group-faceshape-wrap").svgaScaleUp(2,.02,1e-4),F("svga-group-hair-back").svgaScaleUp(2,.02,1e-4),F("svga-group-hair-front").svgaScaleUp(2,.02,1e-4),"male"==he.gender&&F("svga-group-beardwrap").svgaScaleUp(2,.02,1e-4),F("svga-group-ears-left-move").svgaLeft(2,1.5),F("svga-group-ears-right-move").svgaRight(2,1.5);break;case"mouth":F("svga-group-mouth-single").svgaScaleUp(7);break;case"nose":F("svga-group-nose-single").svgaScaleUp(5);break;case"ears":F("svga-group-ears-left").svgaScaleUp(1),F("svga-group-ears-right").svgaScaleUp(1);break;case"eyebrows":F("svga-group-eyebrows-left").svgaScaleUp(),F("svga-group-eyebrows-right").svgaScaleUp();break;case"eyesfront":F("svga-group-eyes-left").svgaScaleUp(2),F("svga-group-eyes-right").svgaScaleUp(2);break;case"eyesiris":F("svga-group-eyesiris-left").svgaScaleUp(4),F("svga-group-eyesiris-right").svgaScaleUp(4);break;case"mustache":Number(he.currentAvatar.mustache)&&F("svga-group-mustache-single").svgaScaleUp(4);break;case"beard":Number(he.currentAvatar.beard)&&F("svga-group-beard-single").svgaScaleUp(3);break;case"glasses":Number(he.currentAvatar.glasses)&&F("svga-group-glasses-single").svgaScaleUp(3)}}function X(e){switch(e||he.zone){case"mouth":F("svga-group-mouth-single-move").svgaRight(2,.5);break;case"nose":F("svga-group-nose-single-move").svgaRight(2,.5);break;case"eyesiris":F("svga-group-eyesiriscontrol-left").svgaRight(),F("svga-group-eyesiriscontrol-right").svgaRight();break;case"mustache":F("svga-group-mustache-single-move").svgaRight(2,.5);break;case"beard":F("svga-group-beard-single-move").svgaRight(2,.5)}}function Y(e){switch(e||he.zone){case"mouth":F("svga-group-mouth-single-move").svgaLeft(2,.5);break;case"nose":F("svga-group-nose-single-move").svgaLeft(2,.5);break;case"eyesiris":F("svga-group-eyesiriscontrol-left").svgaLeft(),F("svga-group-eyesiriscontrol-right").svgaLeft();break;case"mustache":F("svga-group-mustache-single-move").svgaLeft(2,.5);break;case"beard":F("svga-group-beard-single-move").svgaLeft(2,.5)}}function Z(e){switch(e||he.zone){case"mouth":F("svga-group-mouth-single-move").svgaDown();break;case"ears":F("svga-group-ears-left-move").svgaDown(1),F("svga-group-ears-right-move").svgaDown(1);break;case"nose":F("svga-group-nose-single-move").svgaDown(4);break;case"eyebrows":F("svga-group-eyebrows-left-move").svgaDown(4),F("svga-group-eyebrows-right-move").svgaDown(4);break;case"eyesfront":F("svga-group-eyes-left-move").svgaDown(2),F("svga-group-eyes-right-move").svgaDown(2);break;case"eyesiris":F("svga-group-eyesiriscontrol-left").svgaDown(),F("svga-group-eyesiriscontrol-right").svgaDown();break;case"mustache":F("svga-group-mustache-single-move").svgaDown(4);break;case"beard":F("svga-group-beard-single-move").svgaDown(4);break;case"glasses":F("svga-group-glasses-single-move").svgaDown(5)}}function W(e){switch(e||he.zone){case"mouth":F("svga-group-mouth-single-move").svgaUp();break;case"ears":F("svga-group-ears-left-move").svgaUp(1),F("svga-group-ears-right-move").svgaUp(1);break;case"nose":F("svga-group-nose-single-move").svgaUp(4);break;case"eyebrows":F("svga-group-eyebrows-left-move").svgaUp(4),F("svga-group-eyebrows-right-move").svgaUp(4);break;case"eyesfront":F("svga-group-eyes-left-move").svgaUp(2),F("svga-group-eyes-right-move").svgaUp(2);break;case"eyesiris":F("svga-group-eyesiriscontrol-left").svgaUp(),F("svga-group-eyesiriscontrol-right").svgaUp();break;case"mustache":F("svga-group-mustache-single-move").svgaUp(4);break;case"beard":F("svga-group-beard-single-move").svgaUp(4);break;case"glasses":F("svga-group-glasses-single-move").svgaUp(5)}}function J(e){switch(e||he.zone){case"eyebrows":F("svga-group-eyebrows-left-move").svgaRight(),F("svga-group-eyebrows-right-move").svgaLeft();break;case"eyesfront":F("svga-group-eyes-left-move").svgaRight(),F("svga-group-eyes-right-move").svgaLeft()}}function K(e){switch(e||he.zone){case"eyebrows":F("svga-group-eyebrows-left-move").svgaLeft(),F("svga-group-eyebrows-right-move").svgaRight();break;case"eyesfront":
F("svga-group-eyes-left-move").svgaLeft(),F("svga-group-eyes-right-move").svgaRight()}}function Q(e){var t=15,a=F("svga-group-eyebrows-left-rotate"),o=F("svga-group-eyebrows-right-rotate"),r=null,s=null;switch(e){case 0:r=[ee(a,"rotate"),ee(a,"rotate-x"),ee(a,"rotate-y")],s=[ee(o,"rotate"),ee(o,"rotate-x"),ee(o,"rotate-y")],a.rotate(r[0]),o.rotate(s[0]);break;case 1:a.svgaCancelRotate(),a.svgaRotateRight(1,t/2),o.svgaCancelRotate(),o.svgaRotateRight(1,t/4);break;case 2:a.svgaCancelRotate(),a.svgaRotateLeft(1,t/4),o.svgaCancelRotate(),o.svgaRotateLeft(1,t/2);break;case 3:a.svgaCancelRotate(),a.svgaRotateRight(1,t/2),o.svgaCancelRotate(),o.svgaRotateLeft(1,t/2);break;case 4:a.svgaCancelRotate(),a.svgaRotateLeft(1,t/1.4),o.svgaCancelRotate(),o.svgaRotateRight(1,t/1.4);break;default:a.svgaCancelRotate(),o.svgaCancelRotate()}}function $(e){var t=he.options.settings.atlasPosition[he.currentStyle||0];switch(e){case"up":SVG.get("svga-group-humanwrap-move").svgaUp(3,2);break;case"down":SVG.get("svga-group-humanwrap-move").svgaDown(3,2);break;case"left":SVG.get("svga-group-humanwrap-move").svgaLeft(4,2);break;case"right":SVG.get("svga-group-humanwrap-move").svgaRight(4,2);break;case"plus":SVG.get("svga-group-humanwrap").svgaScaleUp();break;case"minus":SVG.get("svga-group-humanwrap").svgaScaleDown();break;case"rotateLeft":SVG.get("svga-group-hair-back-move").svgaRotateLeft(1,3,t.x,t.y),SVG.get("svga-group-head").svgaRotateLeft(1,3,t.x,t.y);break;case"rotateRight":SVG.get("svga-group-hair-back-move").svgaRotateRight(1,3,t.x,t.y),SVG.get("svga-group-head").svgaRotateRight(1,3,t.x,t.y)}}function ee(e,t,a){return he.svgStore.data(e,t)||a||0}function te(){function e(e){var t=he.data.elementsInfo[e].shapes,a="backs"==e?t.length:t[0].length;return a?a-1:0}var t,a,o=!1,r=!1,s=!1,n=!1,i=ue(0,19),l=he.data.elementsInfo;for(var c in ae(),se(!1),ue(0,2)>1&&(0==ue(0,1)?o=!0:r=!0),s=ue(0,3)>2,l){switch(c){case"backs":n=ue(0,e("backs"));break;case"mustache":n=o?g(c):0;break;case"beard":n=r?g(c):0;break;case"glasses":n=s?g(c):0;break;default:n=g(c)}function g(t){let a=["glasses","mustache","beard"],o=null;for(;null===o;){let r=ue(-1!=a.indexOf(t)?1:0,e(t)),s=he.data.elementsInfo[t].shapes[0][r],n=Object.keys(s);o=s[n[0]][0]&&s[n[0]][0].randomDisabled?null:r}return o}t=-1!=["hair","mustache","beard","eyebrows"].indexOf(c)?i:-1!=["mouth","nose","ears","faceshape"].indexOf(c)?ue(0,11):ue(0,19),a=l[c].colors,"string"==typeof a&&(a=he.data.defaults.examples[a]),a.length&&(a.length<t&&(t%=a.length),he.setColor(a[t],c),d(c,n,he.currentStyle,!1))}void 0!==he.currentAvatar[he.zone]&&he.colorControl.setColor(he.currentColors[he.zone],!1),he.init&&he.history.save()}function ae(){function e(){a.length&&g(a[0],function(t){var o=a.indexOf(t);a.splice(o,1),e()})}if(!be){be=!0;for(var t=he.categoriesControl.elements,a=[],o=0,r=t.length;o<r;o++)a.push(t[o].dataset.zoneName);e()}}function oe(e,t){for(var a,o,r,s=-1;s<(e?he.quantity.styles:0);s++)a=-1==s?"svga-svgmain":"svga-svgstyle-"+s,o=-1==s?null:s,document.getElementById(a).innerHTML="",r=SVG(a).attr({id:"svga-svgcanvas"+(null!==o?"-"+o:""),width:null,height:null,class:null!==o?"style-buttons__svg":"avatar-elements__svg",viewBox:"0 0 200 200",preserveAspectRatio:"xMinYMin meet","data-mod":null!==o?o:""}),ne(r,t)}function re(){var e,t,a,o=[];e=SVG("svga-svgcanvas").node.querySelectorAll("g");for(var r=0,s=e.length;r<s;r++)he.svgStore.store.hasOwnProperty(e[r].id)&&o.push(e[r].id);for(var n=0,i=o.length;n<i;n++)t=SVG.get(o[n]),"svga-group-eyebrows-right-rotate"==o[n]||"svga-group-eyebrows-left-rotate"==o[n]?(a=ee(t,"rotate"),t.svgaCancelRotate(),a<0?t.svgaRotateLeft(1,Math.abs(a)):a>0&&t.svgaRotateRight(1,a)):1==ee(t,"scaleX",1)&&1==ee(t,"scaleY",1)||t.svgaCenterScale(ee(t,"scaleX",1),ee(t,"scaleY",1))}function se(e){var t=he.data.defaults.colors,a=he.data.elementsInfo;for(var o in oe(!0,!0),t)t.hasOwnProperty(o)&&he.setColor(t[o],o);for(var r in a)a.hasOwnProperty(r)&&he.setArea(r,"backs"==r||"hair"==r?1:0,he.currentStyle,!1);!1!==e&&he.init&&he.history.save()}function ne(e,t){function a(e,t){return e.attr("id",t+(null!==l?"-"+l:""))}function o(e,a,o){var r=["updown","leftright","rotate"];if(t||a){if(e.attr("transform","matrix(1,0,0,1,0,0)"),!a)for(var s=0;s<r.length;s++)he.svgStore.data(e,r[s],0)}else o||(e.attr("transform","matrix(1,0,0,1,0,0)"),e.move(ee(e,"leftright"),ee(e,"updown")),e.rotate(ee(e,"rotate"),ee(e,"rotate-x"),ee(e,"rotate-y")))}function r(e){t&&(he.svgStore.data(e,"scaleX",1),he.svgStore.data(e,"scaleY",1),e.attr("transform","matrix(1,0,0,1,0,0)"))}var s,n,i,l=e.node.getAttribute("data-mod");if(l=0==l.length?null:l,e=a(e.group(),"svga-group-wrapper"),a(e.group(),"svga-group-backs-single"),e=a(e.group(),"svga-group-humanwrap-move"),o(e),e=a(e.group(),"svga-group-humanwrap"),r(e),s=a(e.group(),"svga-group-hair-back-move"),o(s),s=a(s.group(),"svga-group-hair-back"),r(s),a(e.group(),"svga-group-humanbody-back"),a(e.group(),"svga-group-chinshadow-single"),a(e.group(),"svga-group-humanbody-front"),a(e.group(),"svga-group-clothes-single"),i=a(e.group(),"svga-group-head"),o(i),s=a(e.group(),"svga-group-ears-left-move"),o(s),i.add(s),s=a(s.group(),"svga-group-ears-left"),r(s),s=a(e.group(),"svga-group-ears-right-move"),o(s),i.add(s),s=a(s.group(),"svga-group-ears-right"),r(s),s=a(e.group(),"svga-group-faceshape-wrap"),r(s),i.add(s),a(s.group(),"svga-group-faceshape-single"),s=a(e.group(),"svga-group-mouth-single-move"),o(s),i.add(s),s=a(s.group(),"svga-group-mouth-single"),r(s),s=a(e.group(),"svga-group-eyes-left-move"),o(s),i.add(s),s=a(s.group(),"svga-group-eyes-left"),r(s),a(s.group(),"svga-group-eyesback-left"),n=a(s.group(),"svga-group-eyesiriswrapper-left"),n=a(n.group(),"svga-group-eyesiriscontrol-left"),o(n),n=a(n.group(),"svga-group-eyesiris-left"),r(n),a(s.group(),"svga-group-eyesfront-left"),s=a(e.group(),"svga-group-eyes-right-move"),o(s),i.add(s),s=a(s.group(),"svga-group-eyes-right"),r(s),a(s.group(),"svga-group-eyesback-right"),n=a(s.group(),"svga-group-eyesiriswrapper-right"),n=a(n.group(),"svga-group-eyesiriscontrol-right"),o(n),n=a(n.group(),"svga-group-eyesiris-right"),r(n),a(s.group(),"svga-group-eyesfront-right"),a(i.group(),"svga-group-facehighlight-single"),s=a(i.group(),"svga-group-eyebrows-left-move"),o(s),s=a(s.group(),"svga-group-eyebrows-left-rotate"),o(s,!1,!0),s=a(s.group(),"svga-group-eyebrows-left"),r(s),s=a(i.group(),"svga-group-eyebrows-right-move"),o(s),s=a(s.group(),"svga-group-eyebrows-right-rotate"),o(s,!1,!0),s=a(s.group(),"svga-group-eyebrows-right"),r(s),"male"==he.gender&&(s=a(i.group(),"svga-group-beardwrap"),r(s),s=a(s.group(),"svga-group-beard-single-move"),o(s),s=a(s.group(),"svga-group-beard-single"),r(s),s=a(i.group(),"svga-group-mustache-single-move"),o(s),s=a(s.group(),"svga-group-mustache-single"),r(s)),s=a(i.group(),"svga-group-nose-single-move"),o(s),s=a(s.group(),"svga-group-nose-single"),r(s),s=a(i.group(),"svga-group-hair-front"),r(s),s=a(i.group(),"svga-group-glasses-single-move"),o(s),s=a(s.group(),"svga-group-glasses-single"),r(s),he.options.settings.shareCredit&&null===l){var c=SVG.get("svga-group-wrapper"),g=c.rect(200,15).move(0,185).fill("#ecf0f1").opacity(.5).id("svga-credit-rect"),u=c.text(he.options.settings.shareCredit).font({"font-family":"Avenir Next, Roboto, Helvetica, Arial, sans-serif",size:"10px",anchor:"start",weight:400});u.fill("#333").center(100,192).id("svga-credit-text"),g.hide(),u.hide()}}function ie(e,t,a,o,r,s){function n(){h=e.path(p.path,!0),h.data("colored",p.colored,!0),h.data("transparence",p.transparence,!0),h.data("fillType",p.fill),h.data("strokeType",p.stroke),p.fromskin&&h.data("fromskin",p.fromskin,!0),h.data("colored")?(d=s?he.data.defaults.colors[p.fromskin?"faceshape":t]:p.fromskin?"faceshape":t,void 0!==d&&(v=pe(h.data("fillType"),d,!1),m=pe(h.data("strokeType"),d,!1),i(v,m,p))):"gradient"==p.fill?(he.drawFlag?g(u("svga-on-canvas-"+t+"-gradient-"+o+"-"+_)):c(document.getElementById(u("svga-"+t+"-gradient-"+o+"-"+a+"-"+_+"-"+r))),f=e.gradient(p.type,l.bind(e,s)),p.x1&&f.attr({x1:p.x1}),p.y1&&f.attr({y1:p.y1}),p.x2&&f.attr({x2:p.x2}),p.y2&&f.attr({y2:p.y2}),p.cx&&f.attr({cx:p.cx}),p.cy&&f.attr({cy:p.cy}),p.fx&&f.attr({fx:p.fx}),p.fy&&f.attr({fy:p.fy}),p.r&&f.attr({r:p.r}),p.gradientTransform&&f.attr({gradientTransform:p.gradientTransform}),p.gradientUnits&&f.attr({gradientUnits:p.gradientUnits}),he.drawFlag?f.attr("class","svga-on-canvas-"+t+"-gradient-"+o+"-"+_+"-"+r):f.attr("id",u("svga-"+t+"-gradient-"+o+"-"+a+"-"+_+"-"+r)),h.attr({fill:f})):i(p.fill,p.stroke,p),p.opacity&&h.attr({opacity:p.opacity}),he.drawFlag?(p.id&&h.attr("id",u(p.id+"-"+o)),"eyesback"==t&&SVG.get(u("svga-group-eyesiriswrapper-"+o)).transform({x:0,y:0}),(p.irisx||p.irisy)&&SVG.get(u("svga-group-eyesiriswrapper-"+o)).move(p.irisx,p.irisy),"hair"==t&&(p.hideears?(SVG.get(u("svga-group-ears-left-move")).hide(),SVG.get(u("svga-group-ears-right-move")).hide()):(SVG.get(u("svga-group-ears-left-move")).show(),SVG.get(u("svga-group-ears-right-move")).show()))):p.hideonthumbs&&h.remove(),he.drawFlag&&p.hideoncanvas&&h.remove()}function i(e,t,a){h.attr({fill:e}),h.attr({stroke:t,"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,"stroke-miterlimit":a.strokeMiterlimit})}function l(e,a){var o,r,s,n;if(p.gradientStops){n=e?he.data.defaults.colors[p.fromskin?"faceshape":t]:p.fromskin?"faceshape":t;for(var i=0,l=p.gradientStops.length;i<l;i++)o=p.gradientStops[i].color,r=pe(o,n,!0),s=a.at(p.gradientStops[i]),s.update({color:r}),s.data("stoptype",o)}}function c(e){e&&e.parentNode.removeChild(e)}function g(e){for(var t=document.querySelectorAll("."+e),a=0,o=t.length;a<o;a++)c(t[a])}function u(e){return e+(null!==b?"-"+b:"")}var d,v,m,p,h,f,y,b=e.node.viewportElement.getAttribute("data-mod"),S=he.data.elementsInfo[t].shapes;if("backs"!=t&&(S=S["number"!=typeof r?he.currentStyle:r]),S&&(S=S[a],S)){y=S[o],b=b&&b.length?b:null;for(var _=0,w=y.length;_<w;_++)p="string"==typeof y[_]?he.data.defaults.examples[y[_]]:y[_],n()}}function le(e,t,a,o,r){var s,n;n="backs"==t?e[a]:e[o][a],s=he.elementsControl.appendElement(null,{group:t,index:a,style:o}),ce(s,t,a,o,n,r),s.classList.add("avatar-elements__item_hidden")}function ce(e,t,a,o,r,s){var n,i;i=SVG(e).size("100%","100%").attr({id:"svga-svgcanvas-elements-"+t+"-"+a+"-"+o,width:null,height:null,class:"avatar-elements__svg",viewBox:"0 0 200 200",preserveAspectRatio:"xMinYMin meet"}).group();var l=r?Object.keys(r):[],c=null,g=l.indexOf("back");for(var u in-1!=g&&(l.splice(g,1),l.unshift("back")),l)c=l[u],r.hasOwnProperty(c)&&-1!=["right","single","back","front"].indexOf(c)&&(s=r[c][0]&&r[c][0].scaleFactor||s,ie(i,t,a,c,o,!0));n=i.bbox(),i.transform({scale:s}),i.transform({x:-n.x*s+(200-n.width*s)/2}),i.transform({y:-n.y*s+(200-n.height*s)/2}),"clothes"==t&&i.move(10,5),"hair"==t&&a>0&&i.move(0,20)}function ge(){var e,t,a=he.data.elementsInfo;for(var o in a)if(a.hasOwnProperty(o))if(e=a[o].scaleFactor,t=a[o].shapes,"backs"==o)for(var r=0;r<t.length;r++)le(t,o,r,0,e);else if(-1==["humanbody","chinshadow"].indexOf(o))for(var s=0,n=t.length;s<n;s++)for(r=0;r<t[s].length;r++)le(t,o,r,s,e)}function ue(e,t){return Math.floor(Math.random()*(t-e+1))+e}function de(e,t){if(t=t||he.zone,he.currentColors[t]==e)return e;var a=["faceshape","humanbody","chinshadow","ears","mouth","nose","eyesfront","eyesback","hair"];return ve("faceshape"==t||"ears"==t||"nose"==t?a:[t],e,t),e}function ve(e,t,a){function o(e,t){for(var a=c[v],o=null,r=0,s=0,i=a.length;r<i;r++)if(!a[r].hideoncanvas){if(s==e){o=a[r];break}s++}var l,g=o.fromskin?"faceshape":n;if(o.colored)this.node.setAttribute("fill",pe(o.fill,g,!1)),this.node.setAttribute("stroke",pe(o.stroke,g,!1));else{if("gradient"!=o.fill)return;l=SVG.get(this.node.getAttribute("fill").replace(/url\(#/,"").replace(/\)/,"")),l.each(function(e){this.update({color:pe(o.gradientStops[e].color,g,!0)})})}}var r,s,n,i,l,c,g=e.length,u=he.data.elementsInfo;a=a||he.zone;for(r=0;r<g;r++)if(n=e[r],g>1&&"mouth"!=n&&"eyesfront"!=n&&"hair"!=n?he.currentColors[n]=t:he.currentColors[a]=t,s="facehighlight"==n||"humanbody"==n?0:he.currentAvatar[n],l=u[n],l)for(var d=-1;d<he.quantity.styles;d++)for(var v in c="backs"==a?l.shapes[s]:l.shapes[-1==d?he.currentStyle:d][s],c)c.hasOwnProperty(v)&&(i=SVG.get("svga-group-"+n+"-"+v+(-1==d?"":"-"+d)),i&&i.each(o))}function me(e,t,a){if(e=he.colorControl.toHSV(e),!e)return null;var o=0==e[1];return e[1]+=100*t,e[1]=e[1]<0?0:e[1],e[1]=e[1]>100?100:e[1],e[2]+=100*a,e[2]=e[2]<0?0:e[2],e[2]=e[2]>100?100:e[2],0==e[0]&&o&&(e[1]=0),he.colorControl.toHEX(e)}function pe(e,t,a){var o,r=he.options.settings,s=r.saturationDelta,n=r.brightnessDelta,i="#"==t[0]?t:he.currentColors[t];switch(e){case"none":o="none";break;case"tone":o=i;break;case"hl05":o=me(i,-.5*s,.5*n);break;case"hl1":o=me(i,-s,n);break;case"hl2":o=me(i,-2*s,2*n);break;case"hl3":o=me(i,-3*s,3*n);break;case"sd05":o=me(i,.5*s,-.5*n);break;case"sd1":o=me(i,s,-n);break;case"sd2":o=me(i,2*s,-2*n);break;case"sd3":o=me(i,3*s,-3*n);break;case"sd35":o=me(i,3.5*s,-3.5*n);break;default:o=i,a&&(o=e)}return o}var he=this,fe=e.matchMedia("(max-width:767px)"),ye=e.matchMedia("(min-width:551px)"),be=!1;return he.options=t,a(),he.getDataCallback=b,he.drawShape=ie,e.calculateTone=pe,he};void 0===e.AvatarMaker&&(e.AvatarMaker=t)}(window);var avatarMaker=new AvatarMaker({root:document.querySelector(".page"),settings:{pathToFolder:"https://avatarmaker.com/",pathToPhpFolder:"https://avatarmaker.com/php/",pathToTempFolder:"https://avatarmaker.com/temp-avatars/",endCSSPath:"/styles/css/end.min.css?a1",downloadingName:"AvatarMaker",saturationDelta:.1,brightnessDelta:.06,pngFirstSize:200,pngSecondSize:400,svgDownloadSize:600,atlasPosition:[{x:100,y:145},{x:100,y:155},{x:100,y:135},{x:100,y:140}],shareCredit:"Created on AvatarMaker.com",notifyTypes:{downloading:{text:"Something went wrong with downloading. Please try again.",cls:"error"},wrong:{text:"Something went wrong. Try again later.",cls:"error"},default:{text:"&nbsp;",cls:"error"}},notifyTemplate:'<p class="notify"><span class="notify__text"></span><button class="notify__close"><svg class="notify__icon" viewbox="0 0 15 16"><use xlink:href="#close"></use></svg></button></p>',labels:{ears:"ear",eyebrows:"eyebrow",eyesfront:"eye",eyesiris:"iris",faceshape:"face shape"}}});